(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39fe2296"],{"17a6":function(e,r,s){},"421a":function(e,r,s){"use strict";s("17a6")},a55b:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[1==e.status?s("div",{staticClass:"LoginBox"},[s("div",{staticClass:"LoginBox-Box"},[s("el-form",{key:"1",ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"0",inline:!1,size:"normal"}},[s("el-form-item",{attrs:{prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.onSubmit(r)}},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),s("el-form-item",[s("el-button",{staticClass:"login iconfont My-new-iconxuanzhonghaoyou",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")])],1),s("el-form-item",[s("span",[e._v("还没注册？去"),s("span",{staticClass:"sign",on:{click:e.sign}},[e._v("注册")])]),s("span",[e._v("随便看看？去"),s("span",{staticClass:"sign",on:{click:e.Gohome}},[e._v("主页")])])])],1)],1)]):s("div",{staticClass:"register"},[s("div",{staticClass:"registerBox"},[s("el-form",{key:"2",ref:"regform",attrs:{model:e.regform,rules:e.regrules,"label-width":"0",inline:!1,size:"normal"}},[s("el-form-item",{attrs:{prop:"regname"}},[s("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.regform.regname,callback:function(r){e.$set(e.regform,"regname",r)},expression:"regform.regname"}})],1),s("el-form-item",{attrs:{prop:"nickname"}},[s("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.regform.nickname,callback:function(r){e.$set(e.regform,"nickname",r)},expression:"regform.nickname"}})],1),s("el-form-item",{attrs:{prop:"pass"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.regform.pass,callback:function(r){e.$set(e.regform,"pass",r)},expression:"regform.pass"}})],1),s("el-form-item",{attrs:{prop:"checkPass"}},[s("el-input",{attrs:{type:"password",placeholder:"请再次输入密码",autocomplete:"off"},model:{value:e.regform.checkPass,callback:function(r){e.$set(e.regform,"checkPass",r)},expression:"regform.checkPass"}})],1),s("el-form-item",[s("el-button",{staticClass:"login",attrs:{type:"primary"},on:{click:e.register}},[e._v("注册")])],1),s("el-form-item",[s("p",[e._v("注册完成？去"),s("span",{staticClass:"sign",on:{click:e.Gotologin}},[e._v("登录")])]),s("span",[e._v("随便看看？去"),s("span",{staticClass:"sign",on:{click:e.Gohome}},[e._v("主页")])])])],1)],1)]),s("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}]})])},a=[],o=s("1da1"),n=(s("96cf"),s("a78e")),i=s.n(n),l=s("bc3a"),m=s.n(l),c={data:function(){var e=this,r=function(r,s,t){""===s?t(new Error("请输入密码")):(""!==e.regform.checkPass&&e.$refs.regform.validateField("checkPass"),t())},s=function(r,s,t){""===s?t(new Error("请再次输入密码")):s!==e.regform.pass?t(new Error("两次输入密码不一致!")):t()},t=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r,s,t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"post",url:"http://127.0.0.1:3000/",data:{value:s}});case 2:a=e.sent,console.log("res",a),200===a.data.code?t():t(new Error("用户名已被占用~请重新输入"));case 5:case"end":return e.stop()}}),e)})));return function(r,s,t){return e.apply(this,arguments)}}();return{loading:!1,form:{name:"",password:""},regform:{regname:"",nickname:"",pass:"",checkPass:""},status:1,rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:15,message:"长度在 3个 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}]},regrules:{regname:[{required:!0,message:"请输入您的用户名",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"},{validator:t,trigger:"blur"}],nickname:[{required:!0,message:"请输入您的昵称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],pass:[{validator:r,trigger:"blur"}],checkPass:[{validator:s,trigger:"blur"}]}}},methods:{register:function(){var e=this,r={username:this.regform.regname,nickname:this.regform.nickname,password:this.regform.pass};this.$http.post("/api/users/register",r).then((function(r){-1==r.data.code?e.$message({message:"用户名或昵称已存在，请重新注册",type:"warning"}):(e.$message({message:"注册成功",type:"success"}),e.status=1)}))},Gohome:function(){this.$router.push({name:"home"})},Gotologin:function(){this.status=1},sign:function(){this.status=2},onSubmit:function(){var e=this;this.$refs["form"].validate((function(r){if(!r)return alert("登录失败"),!1;e.$http.post("/api/users/login",e.form).then((function(r){console.log(r),0===r.data.code&&(e.$store.commit("changIsSignIn",1),i.a.set("token",r.data.token),e.$store.commit("setToken",r.data.token),console.log(e.$store.state.token),e.$router.push({name:"home"}),setTimeout((function(){e.loading=!1}),1e3))}))}))}}},u=c,g=(s("421a"),s("2877")),f=Object(g["a"])(u,t,a,!1,null,"5489d16c",null);r["default"]=f.exports}}]);
//# sourceMappingURL=chunk-39fe2296.f1fbff13.js.map